{\n  \"api_contract\": {\n    \"ruta\": "/api/hipotecas",\n    \"metodo\": "GET",\n    \"descripcion\": "Devuelve lista de hipotecas con nombre cliente y dirección propiedad.",\n    \"respuesta_esperada\": [\n      {\n        \"id\": \"integer\",\n        \"cliente_id\": \"integer\",\n        \"cliente_nombre\": \"string\",\n        \"propiedad_id\": \"integer\",\n        \"propiedad_direccion\": \"string\",\n        \"monto_principal\": \"float\",\n        \"tasa_interes_anual\": \"float\",\n        \"plazo_anos\": \"integer\",\n        \"fecha_inicio\": \"date\",\n        \"estado\": \"string (Activa|Pagada|En Mora)\"\n      }\n    ]\n  },\n  \"api_contract_post_hipoteca\": {\n    \"ruta\": "/api/hipotecas",\n    \"metodo\": "POST",\n    \"descripcion\": "Crea nueva hipoteca.",\n    \"parametros_entrada\": {\n      \"cliente_id\": \"integer\",\n      \"propiedad_id\": \"integer\",\n      \"monto_principal\": \"float\",\n      \"tasa_interes_anual\": \"float\",\n      \"plazo_anos\": \"integer\",\n      \"fecha_inicio\": \"date\"\n    },\n    \"respuesta_esperada\": {\n      \"id\": \"integer\"\n    }\n  },\n  \"api_contract_amortizacion\": {\n    \"ruta\": "/api/hipotecas/<int:id>/amortizacion",\n    \"metodo\": "GET",\n    \"descripcion\": "Devuelve plan de amortización completo.",\n    \"respuesta_esperada\": [\n      {\n        \"mes\": \"integer\",\n        \"cuota_mensual\": \"float\",\n        \"capital\": \"float\",\n        \"interes\": \"float\",\n        \"saldo_restante\": \"float\"\n      }\n    ]\n  },\n  \"api_contract_pago\": {\n    \"ruta\": "/api/hipotecas/<int:id>/pagos",\n    \"metodo\": "POST",\n    \"descripcion\": "Registra pago mensual.",\n    \"parametros_entrada\": {\n      \"fecha_pago\": \"date\",\n      \"monto_pagado\": \"float\",\n      \"capital_amortizado\": \"float\",\n      \"interes_pagado\": \"float\"\n    },\n    \"respuesta_esperada\": {\n      \"id\": \"integer\"\n    }\n  },\n  \"contrato_qa_e2e\": {\n    \"hipoteca-list\": "hipoteca-list",\n    \"crear-hipoteca-btn\": "btn-crear-hipoteca",\n    \"detalle-view\": "view-detalle",\n    \"registrar-pago-btn\": "btn-registrar-pago",\n    \"amortizacion-table\": "table-amortizacion"\n  },\n  \"plan\": [\n    {\n      \"etapa\": \"backend\",\n      \"tareas\": [\n        \"Inicializar proyecto Flask con estructura básica y configurar Flask-SQLAlchemy para usar SQLite 'hipotecas.db'.\",\n        \"Crear modelo SQLAlchemy para clientes, propiedades, hipotecas y pagos según esquema proporcionado.\",\n        \"Implementar endpoint GET '/api/hipotecas' que devuelva lista de hipotecas con nombre cliente y dirección propiedad.\",\n        \"Implementar endpoint POST '/api/hipotecas' para crear nueva hipoteca y validar datos de entrada.\",\n        \"Crear función utilitaria para calcular plan de amortización completo y exponerlo en GET '/api/hipotecas/<id>/amortizacion'.\",\n        \"Implementar endpoint POST '/api/hipotecas/<id>/pagos' que registre pago mensual y actualice estado si pagada.\",\n        \"Agregar manejo de errores y respuestas JSON consistentes.\",\n        \"Crear fichero 'requirements.txt' con Flask, Flask-SQLAlchemy, pytest y alembic.\",\n        \"Crear fichero 'pytest.ini' en raíz con configuración básica.\",\n        \"Crear paquete 'backend/' con __init__.py que exponga create_app factory.\",\n        \"Dentro de 'backend/routes.py' definir blueprints para cada endpoint.\",\n        \"Crear fichero 'app.py' en raíz que importe y ejecute la aplicación Flask.\",\n        \"Configurar logging y CORS básico si es necesario.\",\n        \"Crear carpeta 'tests/' con pruebas unitarias para cada endpoint usando test client de pytest.\"\n      ]\n    },\n    {\n      \"etapa\": \"frontend\",\n      \"tareas\": [\n        \"Crear archivo 'index.html' con estructura SPA que incluya dashboard, lista de hipotecas y botones definidos.\",\n        \"Incluir scripts JavaScript ES6 autocontenidos en 'index.html' para manejar navegación entre vistas.\",\n        \"Implementar llamada fetch a GET '/api/hipotecas' para poblar la tabla de hipotecas activas.\",\n        \"Agregar evento click en cada fila para navegar a vista detalle con ID de hipoteca.\",\n        \"En vista detalle, hacer fetch a GET '/api/hipotecas/<id>/amortizacion' y renderizar tabla de amortización.\",\n        \"Añadir formulario modal para 'Registrar Pago' que envíe POST a '/api/hipotecas/<id>/pagos'.\",\n        \"Utilizar data-testid según contrato_qa_e2e para todos los elementos interactivos.\",\n        \"Incluir estilos CSS básicos dentro de <style> en el mismo archivo para mantener simplicidad.\"\n      ]\n    },\n    {\n      \"etapa\": \"e2e\",\n      \"tareas\": [\n        \"Crear carpeta 'cypress/e2e/' y fichero 'mortgages.cy.js' que realice pruebas:\",\n        \"  - Visitar dashboard, verificar presencia de hipoteca-list.\",\n        \"  - Hacer clic en botón crear-hipoteca-btn y completar formulario válido.\",\n        \"  - Confirmar creación reflejada en lista.\",\n        \"  - Navegar a vista detalle, verificar detalle-view y tabla amortizacion.\",\n        \"  - Registrar pago usando registrar-pago-btn y comprobar actualización de saldo.\"\n      ]\n    }\n  ]\n}